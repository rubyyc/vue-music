{"version":3,"sources":["webpack:///search.vue","webpack:///./src/components/search/search.vue?a8a3","webpack:///./src/components/search/search.vue"],"names":["__webpack_exports__","mixins","__WEBPACK_IMPORTED_MODULE_9_common_js_mixin__","created","this","_getHotKey","data","hotKey","computed","shortcut","concat","searchHistory","watch","query","newQuery","_this","setTimeout","$refs","refresh","components","SearchBox","__WEBPACK_IMPORTED_MODULE_1_base_search_box_search_box___default","a","Suggest","__WEBPACK_IMPORTED_MODULE_7_components_suggest_suggest___default","SearchList","__WEBPACK_IMPORTED_MODULE_2_base_search_list_search_list___default","Confirm","__WEBPACK_IMPORTED_MODULE_4_base_confirm_confirm___default","Scroll","__WEBPACK_IMPORTED_MODULE_3_base_scroll_scroll___default","methods","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","handlePlaylist","playlist","bottom","length","shortcutWrapper","style","searchResult","suggest","showConfirm","confirm","show","clearSearch","clearSearchHistory","deleteOne","deleteSearchHistory","_this2","__webpack_require__","i","__WEBPACK_IMPORTED_MODULE_5_api_search__","then","res","code","__WEBPACK_IMPORTED_MODULE_6_api_config__","hotkey","slice","__WEBPACK_IMPORTED_MODULE_8_vuex__","module","exports","render","_vm","_h","$createElement","_c","_self","staticClass","ref","on","onQueryChange","_v","directives","name","rawName","value","expression","attrs","refreshDelay","_l","item","key","n","click","$event","addQuery","k","_s","searches","select","delete","saveSearch","listScroll","blurInput","title","confirmBtnText","staticRenderFns","Component"],"mappings":"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","file":"static/js/8.7f5c0b9684ce7af2b98c.js","sourcesContent":["<template>\n\t<div class=\"search\">\n\t\t<div class=\"search-box-wrapper\">\n\t\t\t<search-box ref=\"searchBox\" @query=\"onQueryChange\"></search-box>\n\t\t</div>\n\t\t<div class=\"shortcut-wrapper\" v-show=\"!query\" ref=\"shortcutWrapper\">\n\t\t\t<scroll :refreshDelay=\"refreshDelay\" class=\"shortcut\" :data=\"shortcut\" ref=\"shortcut\">\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\"hot-key\">\n\t\t\t\t\t\t<h1 class=\"title\">热门搜索</h1>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li class=\"item\" @click=\"addQuery(item.k)\" v-for=\"item in hotKey\" :key=\"item.n\">\n\t\t\t\t\t\t\t\t<span>{{item.k}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"search-history\" v-show=\"searchHistory.length\">\n            <h1 class=\"title\">\n              <span class=\"text\">搜索历史</span>\n              <span class=\"clear\" @click=\"showConfirm\">\n                <i class=\"icon-clear\"></i>\n              </span>\n            </h1>\n            <search-list :searches=\"searchHistory\" @select=\"addQuery\" @delete=\"deleteOne\"></search-list>\n       \t\t</div>\n\t\t\t\t</div>\n\t\t\t</scroll>\n\t\t</div>\n\t\t<div class=\"search-result\" v-show=\"query\" ref=\"searchResult\">\n\t\t\t<suggest @select=\"saveSearch\" @listScroll=\"blurInput\" :query=\"query\" ref=\"suggest\"></suggest>\n\t\t</div>\n\t\t<confirm ref=\"confirm\" title=\"是否清空所有搜索历史\" confirmBtnText=\"清空\" @confirm=\"clearSearch\"></confirm>\n\t\t<router-view></router-view>\n\t</div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n\timport SearchBox from 'base/search-box/search-box'\n\timport SearchList from 'base/search-list/search-list'\n\timport Scroll from 'base/scroll/scroll'\n\timport Confirm from 'base/confirm/confirm'\n\timport {getHotKey} from 'api/search'\n\timport {ERR_OK} from 'api/config'\n\timport Suggest from 'components/suggest/suggest'\n\timport {mapActions} from 'vuex'\n\timport {playlistMixin, searchMixin} from 'common/js/mixin'\n\texport default {\n\t\tmixins: [playlistMixin, searchMixin],\n\t\tcreated() {\n\t\t\tthis._getHotKey()\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\thotKey: []\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tshortcut() {\n\t\t\t\treturn this.hotKey.concat(this.searchHistory)\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tquery(newQuery) {\n\t\t\t\t// console.log(0)\n\t\t\t\tif (!newQuery) {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.$refs.shortcut.refresh()\n\t\t\t\t\t}, 20)\n\t\t\t\t}\n\t\t\t\t// setTimeout(() => {\n\t\t\t\t// \tthis.$refs.shortcut.refresh()\n\t\t\t\t// }, 20)\n\t\t\t}\n\t\t},\n\t\tcomponents: {\n\t\t\tSearchBox,\n\t\t\tSuggest,\n\t\t\tSearchList,\n\t\t\tConfirm,\n\t\t\tScroll\n\t\t},\n\t\tmethods: {\n\t\t\thandlePlaylist(playlist) {\n\t\t\t\tconst bottom = playlist.length > 0 ? '60px' : 0\n\n\t\t\t\tthis.$refs.shortcutWrapper.style.bottom = bottom\n\t\t\t\tthis.$refs.shortcut.refresh()\n\n\t\t\t\tthis.$refs.searchResult.style.bottom = bottom\n\t\t\t\tthis.$refs.suggest.refresh()\n\t\t\t},\n\t\t\tshowConfirm() {\n\t\t\t\tthis.$refs.confirm.show()\n\t\t\t},\n\t\t\tclearSearch() {\n\t\t\t\tthis.clearSearchHistory()\n\t\t\t},\n\t\t\tdeleteOne(query) {\n\t\t\t\tthis.deleteSearchHistory(query)\n\t\t\t},\n\t\t\t_getHotKey() {\n\t\t\t\tgetHotKey().then((res) => {\n\t\t\t\t\tif (res.code === ERR_OK) {\n\t\t\t\t\t\t// console.log(res.data)\n\t\t\t\t\t\tthis.hotKey = res.data.hotkey.slice(0, 10)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t...mapActions([\n\t\t\t\t'clearSearchHistory'\n\t\t\t])\n\t\t}\n\t}\n</script>\n\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\n\t@import \"~common/stylus/variable\"\n\t@import \"~common/stylus/mixin\"\n\n\t.search\n\t\t.search-box-wrapper\n\t\t\tmargin: 20px\n\t\t.shortcut-wrapper\n\t\t\tposition: fixed\n\t\t\ttop: 178px\n\t\t\tbottom: 0\n\t\t\twidth: 100%\n\t\t\t.shortcut\n\t\t\t\theight: 100%\n\t\t\t\toverflow: hidden\n\t\t\t\t.hot-key\n\t\t\t\t\tmargin: 0 20px 20px 20px\n\t\t\t\t\t.title\n\t\t\t\t\t\tmargin-bottom: 20px\n\t\t\t\t\t\tfont-size: $font-size-medium\n\t\t\t\t\t\tcolor: $color-text-l\n\t\t\t\t\t.item\n\t\t\t\t\t\tdisplay: inline-block\n\t\t\t\t\t\tpadding: 5px 10px\n\t\t\t\t\t\tmargin: 0 20px 10px 0\n\t\t\t\t\t\tborder-radius: 6px\n\t\t\t\t\t\tbackground: $color-highlight-background\n\t\t\t\t\t\tfont-size: $font-size-medium\n\t\t\t\t\t\tcolor: $color-text-d\n\t\t\t\t.search-history\n\t\t\t\t\tposition: relative\n\t\t\t\t\tmargin: 0 20px\n\t\t\t\t\t.title\n\t\t\t\t\t\tdisplay: flex\n\t\t\t\t\t\talign-items: center\n\t\t\t\t\t\theight: 40px\n\t\t\t\t\t\tfont-size: $font-size-medium\n\t\t\t\t\t\tcolor: $color-text-l\n\t\t\t\t\t\t.text\n\t\t\t\t\t\t\tflex: 1\n\t\t\t\t\t\t.clear\n\t\t\t\t\t\t\textend-click()\n\t\t\t\t\t\t\t.icon-clear\n\t\t\t\t\t\t\t\tfont-size: $font-size-medium\n\t\t\t\t\t\t\t\tcolor: $color-text-d\n\t\t.search-result\n\t\t\tposition: fixed\n\t\t\twidth: 100%\n\t\t\ttop: 178px\n\t\t\tbottom: 0\n</style>\n\n\n// WEBPACK FOOTER //\n// search.vue?b7143d0c","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"search\"\n  }, [_c('div', {\n    staticClass: \"search-box-wrapper\"\n  }, [_c('search-box', {\n    ref: \"searchBox\",\n    on: {\n      \"query\": _vm.onQueryChange\n    }\n  })], 1), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.query),\n      expression: \"!query\"\n    }],\n    ref: \"shortcutWrapper\",\n    staticClass: \"shortcut-wrapper\"\n  }, [_c('scroll', {\n    ref: \"shortcut\",\n    staticClass: \"shortcut\",\n    attrs: {\n      \"refreshDelay\": _vm.refreshDelay,\n      \"data\": _vm.shortcut\n    }\n  }, [_c('div', [_c('div', {\n    staticClass: \"hot-key\"\n  }, [_c('h1', {\n    staticClass: \"title\"\n  }, [_vm._v(\"热门搜索\")]), _vm._v(\" \"), _c('ul', _vm._l((_vm.hotKey), function(item) {\n    return _c('li', {\n      key: item.n,\n      staticClass: \"item\",\n      on: {\n        \"click\": function($event) {\n          return _vm.addQuery(item.k)\n        }\n      }\n    }, [_c('span', [_vm._v(_vm._s(item.k))])])\n  }), 0)]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.searchHistory.length),\n      expression: \"searchHistory.length\"\n    }],\n    staticClass: \"search-history\"\n  }, [_c('h1', {\n    staticClass: \"title\"\n  }, [_c('span', {\n    staticClass: \"text\"\n  }, [_vm._v(\"搜索历史\")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"clear\",\n    on: {\n      \"click\": _vm.showConfirm\n    }\n  }, [_c('i', {\n    staticClass: \"icon-clear\"\n  })])]), _vm._v(\" \"), _c('search-list', {\n    attrs: {\n      \"searches\": _vm.searchHistory\n    },\n    on: {\n      \"select\": _vm.addQuery,\n      \"delete\": _vm.deleteOne\n    }\n  })], 1)])])], 1), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.query),\n      expression: \"query\"\n    }],\n    ref: \"searchResult\",\n    staticClass: \"search-result\"\n  }, [_c('suggest', {\n    ref: \"suggest\",\n    attrs: {\n      \"query\": _vm.query\n    },\n    on: {\n      \"select\": _vm.saveSearch,\n      \"listScroll\": _vm.blurInput\n    }\n  })], 1), _vm._v(\" \"), _c('confirm', {\n    ref: \"confirm\",\n    attrs: {\n      \"title\": \"是否清空所有搜索历史\",\n      \"confirmBtnText\": \"清空\"\n    },\n    on: {\n      \"confirm\": _vm.clearSearch\n    }\n  }), _vm._v(\" \"), _c('router-view')], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-0e6b8440\",\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/search/search.vue\n// module id = VnGF\n// module chunks = 8","\n/* styles */\nrequire(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-0e6b8440\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0e6b8440\\\",\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/search/search.vue\n// module id = YOyO\n// module chunks = 8"],"sourceRoot":""}