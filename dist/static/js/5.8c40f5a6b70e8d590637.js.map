{"version":3,"sources":["webpack:///./src/api/rank.js","webpack:///./src/components/top-list/top-list.vue?4db3","webpack:///top-list.vue","webpack:///./src/components/top-list/top-list.vue"],"names":["data","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","commonParams","uin","needNewCode","platform","jsonp","options","topid","tpl","page","type","module","exports","render","_h","this","$createElement","_c","_self","attrs","name","appear","rank","title","bgImage","songs","staticRenderFns","__webpack_exports__","components","MusicList","__WEBPACK_IMPORTED_MODULE_5_components_music_list_music_list___default","a","computed","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","topList","topTitle","length","image","picUrl","__webpack_require__","i","__WEBPACK_IMPORTED_MODULE_1_vuex__","created","_getTopList","methods","_this","id","__WEBPACK_IMPORTED_MODULE_2_api_rank__","then","res","__WEBPACK_IMPORTED_MODULE_3_api_config__","code","_normalizeSongs","songlist","$router","push","list","ret","forEach","item","index","musicData","songid","albummid","__WEBPACK_IMPORTED_MODULE_4_common_js_song__","Component"],"mappings":"+EAGO,WACN,IAEMA,EAAOC,OAAkBC,KAC5BC,IAAK,EACLC,YAAa,EACbC,SAAU,OAGZ,OAAOC,SARI,qDAQON,EAAMO,UAGnB,SAAsBC,GAC3B,IAEMR,EAAOC,OAAkBC,KAC7BM,QACAJ,YAAa,EACbD,IAAK,EACLM,IAAK,EACLC,KAAM,SACNC,KAAM,MACNN,SAAU,OAGZ,OAAOC,SAZK,sDAYMN,EAAMO,6EC5B1BK,EAAAC,SAAgBC,OAAA,WAAmB,IAAaC,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAC1E,OAAAG,EAAA,cACAE,OACAC,KAAA,QACAC,OAAA,MAEGJ,EAAA,cACHE,OACAG,KARmCP,KAQnCO,KACAC,MATmCR,KASnCQ,MACAC,QAVmCT,KAUnCS,QACAC,MAXmCV,KAWnCU,UAEG,IACFC,sMCADC,EAAA,SACAC,YACAC,UAAAC,EAAAC,GAEAC,SAAAC,KACAV,MADA,WAEA,OAAAR,KAAAmB,QAAAC,UAEAX,QAJA,WAKA,OAAAT,KAAAU,MAAAW,OACArB,KAAAU,MAAA,GAAAY,MAEAtB,KAAAmB,QAAAI,SAEAC,EAAAC,EAAAC,EAAA,EAAAF,EACA,aAGAxC,KAlBA,WAmBA,OACA0B,SACAH,MAAA,IAGAoB,QAxBA,WAyBA3B,KAAA4B,eAEAC,SACAD,YADA,WACA,IAAAE,EAAA9B,KACAA,KAAAmB,QAAAY,GAIGP,EAAAC,EAAAO,EAAA,EAAAR,CAAHxB,KAAAmB,QAAAY,IAAAE,KAAA,SAAAC,GACAC,EAAA,IAAAD,EAAAE,OACAN,EAAApB,MAAAoB,EAAAO,gBAAAH,EAAAI,aALAtC,KAAAuC,QAAAC,KAAA,UAsBAH,gBAzBA,SAyBAI,GACA,IAAAC,KAoBA,OAnBAD,EAAAE,QAAA,SAAAC,EAAAC,GAGA,IAAAC,EAAAF,EAEAE,EAAA9D,KAAA+D,QAAAD,EAAA9D,KAAAgE,UACAN,EAAAF,KAAAhB,EAAAC,EAAAwB,EAAA,EAAAzB,CAAAsB,EAAA9D,KAAA,WAaA0D,2BCrFAlB,EAAQ,QAER,IAAA0B,EAAgB1B,EAAQ,OAARA,CAEdA,EAAQ,QAERA,EAAQ,QAEV,kBAEA,MAGA5B,EAAAC,QAAAqD,EAAArD","file":"static/js/5.8c40f5a6b70e8d590637.js","sourcesContent":["import jsonp from 'common/js/jsonp'\nimport {commonParams, options} from './config'\n\nexport function getTopList() {\n\tconst url = 'https://c.y.qq.com/v8/fcg-bin/fcg_myqq_toplist.fcg'\n\n\tconst data = Object.assign({}, commonParams, {\n    uin: 0,\n    needNewCode: 1,\n    platform: 'h5'\n  })\n\n  return jsonp(url, data, options)\n}\n\nexport function getMusicList(topid) {\n  const url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_toplist_cp.fcg'\n\n  const data = Object.assign({}, commonParams, {\n    topid,\n    needNewCode: 1,\n    uin: 0,\n    tpl: 3,\n    page: 'detail',\n    type: 'top',\n    platform: 'h5'\n  })\n\n  return jsonp(url, data, options)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/rank.js","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('transition', {\n    attrs: {\n      \"name\": \"slide\",\n      \"appear\": \"\"\n    }\n  }, [_c('music-list', {\n    attrs: {\n      \"rank\": _vm.rank,\n      \"title\": _vm.title,\n      \"bgImage\": _vm.bgImage,\n      \"songs\": _vm.songs\n    }\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-77ad6140\",\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/top-list/top-list.vue\n// module id = b/A4\n// module chunks = 5","<template>\n\t<transition name=\"slide\" appear>\n\t\t<music-list :rank=\"rank\" :title=\"title\" :bgImage=\"bgImage\" :songs=\"songs\"></music-list>\n\t</transition>\n</template>\n\n<script type=\"text/ecmascript-6\">\n\timport {mapGetters} from 'vuex'\n\timport {getMusicList} from 'api/rank'\n\timport {ERR_OK} from 'api/config'\n\t// import {createSong, getSongmp3, jqueryUrl} from 'common/js/song'\n\timport {createSong} from 'common/js/song'\n\timport MusicList from 'components/music-list/music-list'\n\n\texport default {\n\t\tcomponents: {\n\t\t\tMusicList\n\t\t},\n\t\tcomputed: {\n\t\t\ttitle() {\n\t\t\t\treturn this.topList.topTitle\n\t\t\t},\n\t\t\tbgImage() {\n\t\t\t\tif (this.songs.length) {\n\t\t\t\t\treturn this.songs[0].image\n\t\t\t\t}\n\t\t\t\treturn this.topList.picUrl\n\t\t\t},\n\t\t\t...mapGetters([\n\t\t\t\t'topList'\n\t\t\t])\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tsongs: [],\n\t\t\t\trank: true\n\t\t\t}\n\t\t},\n\t\tcreated() {\n\t\t\tthis._getTopList()\n\t\t},\n\t\tmethods: {\n\t\t\t_getTopList() {\n\t\t\t\tif (!this.topList.id) {\n\t\t\t\t\tthis.$router.push('/rank')\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tgetMusicList(this.topList.id).then((res) => {\n\t\t\t\t\tif (ERR_OK === res.code) {\n\t\t\t\t\t\tthis.songs = this._normalizeSongs(res.songlist)\n\t\t\t\t\t\t// console.log(this.songs)\n\t\t\t\t\t\t// let temp = this._normalizeSongs(res.songlist)\n\t\t\t\t\t\t// let r = []\n\t\t\t\t\t\t// setTimeout(() => {\n\t\t\t\t\t\t// \t\ttemp.sort((a, b) => {\n\t\t\t\t\t\t// \t\t\treturn b.id - a.id\n\t\t\t\t\t\t// \t\t})\n\t\t\t\t\t\t// }, 600)\n\t\t\t\t\t\t// setTimeout(() => {\n\t\t\t\t\t\t\t// console.log(r)\n\t\t\t\t\t\t\t// this.songs = temp\n\t\t\t\t\t\t// }, 3000)\n\t\t\t\t\t\t// console.log(this.songs)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t_normalizeSongs(list) {\n\t\t\t\tlet ret = []\n\t\t\t\tlist.forEach((item, index) => {\n\t\t\t\t\t// list[index].order = index\n\t\t\t\t\t// console.log(list[index].order)\n\t\t\t\t\tlet musicData = item\n\t\t\t\t\t// console.log(musicData.data.songid)\n\t\t\t\t\tif (musicData.data.songid && musicData.data.albummid) {\n\t\t\t\t\t\tret.push(createSong(musicData.data, '', 0, 1))\n\t\t\t\t\t\t// ret.push(createSong(musicData, 'www.baidu.com'))\n\t\t\t\t\t\t// ret.push(createSong(musicData.data, `${musicData.data.songmid}`, 0, 1))\n\t\t\t\t\t\t// getSongmp3(musicData.data.songmid, index).then((res) => {\n\t\t\t\t\t\t// \t// let urlObject = this.jqueryUrl(res.data[0])\n\t\t\t\t\t\t// \tlet urlObject = jqueryUrl(res.data[0])\n\t\t\t\t\t\t// \tif (urlObject.vkey) {\n\t\t\t\t\t\t// \t\t// console.log(index)\n\t\t\t\t\t\t// \t\tret.push(createSong(musicData.data, res.data[0], 0, 1))\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t// })\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn ret\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\n  .slide-enter-active, .slide-leave-active\n    transition: all 0.3s ease\n\n  .slide-enter, .slide-leave-to\n    transform: translate3d(100%, 0, 0)\n</style>\n\n\n// WEBPACK FOOTER //\n// top-list.vue?5c109cdc","\n/* styles */\nrequire(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-77ad6140\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./top-list.vue\")\n\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./top-list.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-77ad6140\\\",\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./top-list.vue\"),\n  /* scopeId */\n  \"data-v-77ad6140\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/top-list/top-list.vue\n// module id = s3x3\n// module chunks = 5"],"sourceRoot":""}