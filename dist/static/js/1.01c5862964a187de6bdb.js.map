{"version":3,"sources":["webpack:///./src/components/singer/singer.vue","webpack:///./src/base/listview/listview.vue?a75d","webpack:///./src/api/singer.js","webpack:///singer.vue","webpack:///./src/components/singer/singer.vue?0d6b","webpack:///listview.vue","webpack:///./src/base/listview/listview.vue"],"names":["__webpack_require__","Component","module","exports","render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","attrs","data","listenScroll","probeType","on","scroll","_l","group","key","title","refInFor","_v","_s","item","id","click","$event","selectItem","directives","name","rawName","value","expression","touchstart","onShortcutTouchStart","touchmove","stopPropagation","preventDefault","onShortcutTouchMove","index","class","current","currentIndex","data-index","fixedTitle","length","staticRenderFns","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","commonParams","channel","page","pagesize","pagenum","hostUin","needNewCode","platform","g_tk","jsonp","options","singerId","order","begin","num","songstatus","singermid","__webpack_exports__","mixins","__WEBPACK_IMPORTED_MODULE_6_common_js_mixin__","singers","created","_getSingerList","methods","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","handlePlaylist","playlist","bottom","$refs","singer","style","list","refresh","selectSinger","$router","push","path","setSinger","_this","i","__WEBPACK_IMPORTED_MODULE_1_api_singer__","then","res","code","__WEBPACK_IMPORTED_MODULE_2_api_config__","_normallizeSinger","map","hot","items","forEach","__WEBPACK_IMPORTED_MODULE_3_common_js_singer__","Fsinger_mid","Fsinger_name","Findex","ret","val","match","sort","a","b","charCodeAt","concat","__WEBPACK_IMPORTED_MODULE_5_vuex__","components","Listview","__WEBPACK_IMPORTED_MODULE_4_base_listview_listview___default","select","touch","listHeight","scrollY","diff","props","type","Array","default","computed","shortcutList","substr","$emit","e","anchorIndex","__WEBPACK_IMPORTED_MODULE_1_common_js_dom__","target","firstTouch","touches","y1","pageY","_scrollTo","y2","delta","parseInt","listview","scrollToElement","listGroup","pos","y","_calculateHeight","height","clientHeight","watch","setTimeout","newY","height1","height2","newVal","fixedTop","fixed","transform","Scroll","__WEBPACK_IMPORTED_MODULE_0_base_scroll_scroll___default","Loading","__WEBPACK_IMPORTED_MODULE_2_base_loading_loading___default"],"mappings":"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","file":"static/js/1.01c5862964a187de6bdb.js","sourcesContent":["\n/* styles */\nrequire(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-4b8ff140\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./singer.vue\")\n\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singer.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4b8ff140\\\",\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./singer.vue\"),\n  /* scopeId */\n  \"data-v-4b8ff140\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/singer/singer.vue\n// module id = 0IpB\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('scroll', {\n    ref: \"listview\",\n    staticClass: \"listview\",\n    attrs: {\n      \"data\": _vm.data,\n      \"listenScroll\": _vm.listenScroll,\n      \"probeType\": _vm.probeType\n    },\n    on: {\n      \"scroll\": _vm.scroll\n    }\n  }, [_c('ul', _vm._l((_vm.data), function(group) {\n    return _c('li', {\n      key: group.title,\n      ref: \"listGroup\",\n      refInFor: true,\n      staticClass: \"list-group\"\n    }, [_c('h2', {\n      staticClass: \"list-group-title\"\n    }, [_vm._v(_vm._s(group.title))]), _vm._v(\" \"), _c('ul', _vm._l((group.items), function(item) {\n      return _c('li', {\n        key: item.id,\n        staticClass: \"list-group-item\",\n        on: {\n          \"click\": function($event) {\n            return _vm.selectItem(item)\n          }\n        }\n      }, [_c('img', {\n        directives: [{\n          name: \"lazy\",\n          rawName: \"v-lazy\",\n          value: (item.avatar),\n          expression: \"item.avatar\"\n        }],\n        staticClass: \"avatar\"\n      }), _vm._v(\" \"), _c('span', {\n        staticClass: \"name\"\n      }, [_vm._v(_vm._s(item.name))])])\n    }), 0)])\n  }), 0), _vm._v(\" \"), _c('div', {\n    staticClass: \"list-shortcut\",\n    on: {\n      \"touchstart\": _vm.onShortcutTouchStart,\n      \"touchmove\": function($event) {\n        $event.stopPropagation();\n        $event.preventDefault();\n        return _vm.onShortcutTouchMove($event)\n      }\n    }\n  }, [_c('ul', _vm._l((_vm.shortcutList), function(item, index) {\n    return _c('li', {\n      key: index,\n      staticClass: \"item\",\n      class: {\n        'current': _vm.currentIndex === index\n      },\n      attrs: {\n        \"data-index\": index\n      }\n    }, [_vm._v(_vm._s(item))])\n  }), 0)]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.fixedTitle),\n      expression: \"fixedTitle\"\n    }],\n    ref: \"fixed\",\n    staticClass: \"list-fixed\"\n  }, [_c('h1', {\n    staticClass: \"fixed-title\"\n  }, [_vm._v(_vm._s(_vm.fixedTitle))])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.data.length),\n      expression: \"!data.length\"\n    }],\n    staticClass: \"loading-container\"\n  }, [_c('loading')], 1)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-36e82cfb\",\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/base/listview/listview.vue\n// module id = C3yb\n// module chunks = 1","import jsonp from 'common/js/jsonp'\nimport {commonParams, options} from './config'\n\nexport function getSingerList() {\n\tconst url = 'https://c.y.qq.com/v8/fcg-bin/v8.fcg'\n\n\tconst data = Object.assign({}, commonParams, {\n\t\tchannel: 'singer',\n\t\tpage: 'list',\n\t\tkey: 'all_all_all',\n\t\tpagesize: 100,\n\t\tpagenum: 1,\n\t\thostUin: 0,\n\t\tneedNewCode: 0,\n\t\tplatform: 'yqq',\n\t\tg_tk: 1664029744\n\t})\n\n\treturn jsonp(url, data, options)\n}\n\nexport function getSingerDetail(singerId) {\n\tconst url = 'https://c.y.qq.com/v8/fcg-bin/fcg_v8_singer_track_cp.fcg'\n\tconst data = Object.assign({}, commonParams, {\n\t\thostUin: 0,\n\t\tneedNewCode: 0,\n\t\tplatform: 'yqq',\n\t\torder: 'listen',\n\t\tbegin: 0,\n\t\tnum: 100,\n\t\tsongstatus: 1,\n\t\tsingermid: singerId,\n\t\tg_tk: 1664029744\n\t})\n\n\treturn jsonp(url, data, options)\n}\n\n// 获取歌曲的vkey\n// export function getSongVkey(songmid) {\n// \tconst url = 'https://c.y.qq.com/base/fcgi-bin/fcg_music_express_mobile3.fcg'\n// \tconst data = Object.assign({}, {\n// \t\t\tcallback: 'musicJsonCallback',\n// \t\t\tloginUin: 3051522991,\n// \t\t\tformat: 'jsonp',\n// \t\t\tplatform: 'yqq',\n// \t\t\tneedNewCode: 0,\n// \t\t\tcid: 205361747,\n// \t\t\tuin: 3051522991,\n// \t\t\tguid: 5931742855,\n// \t\t\tsongmid: songmid,\n// \t\t\tfilename: `C400${songmid}.m4a`\n// \t})\n\n// \treturn jsonp(url, data)\n// }\n\n\n// WEBPACK FOOTER //\n// ./src/api/singer.js","<template>\n\t<div class=\"singer\" ref=\"singer\">\n\t\t<listview @select=\"selectSinger\" :data=\"singers\" ref=\"list\"></listview>\n\t\t<router-view></router-view>\n\t</div>\n</template>\n\n<script type=\"text/ecmascript-6\">\n\timport {getSingerList} from 'api/singer'\n\timport {ERR_OK} from 'api/config'\n\timport Singer from 'common/js/singer'\n\timport Listview from 'base/listview/listview'\n\timport {mapMutations} from 'vuex'\n\timport {playlistMixin} from 'common/js/mixin'\n\n\tconst HOT_NAME = '热门'\n\tconst HOT_SINGER_LEN = 10\n\n\texport default {\n\t\tmixins: [playlistMixin],\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tsingers: []\n\t\t\t}\n\t\t},\n\t\tcreated() {\n\t\t\tthis._getSingerList()\n\t\t},\n\t\tmethods: {\n\t\t\thandlePlaylist(playlist) {\n\t\t\t\tconst bottom = playlist.length > 0 ? '60px' : ''\n\t\t\t\tthis.$refs.singer.style.bottom = bottom\n\t\t\t\tthis.$refs.list.refresh()\n\t\t\t},\n\t\t\tselectSinger(singer) {\n\t\t\t\tthis.$router.push({\n\t\t\t\t\tpath: `/singer/${singer.id}`\n\t\t\t\t})\n\t\t\t\tthis.setSinger(singer)\n\t\t\t},\n\t\t\t_getSingerList() {\n\t\t\t\tgetSingerList().then((res) => {\n\t\t\t\t\tif (res.code === ERR_OK) {\n\t\t\t\t\t\t// console.log(res.data.list)\n\t\t\t\t\t\tthis.singers = this._normallizeSinger(res.data.list)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t_normallizeSinger(list) {\n\t\t\t\tlet map = {\n\t\t\t\t\thot: {\n\t\t\t\t\t\ttitle: HOT_NAME,\n\t\t\t\t\t\titems: []\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlist.forEach((item, index) => {\n\t\t\t\t\tif (index < HOT_SINGER_LEN) {\n\t\t\t\t\t\tmap.hot.items.push(new Singer({\n\t\t\t\t\t\t\tid: item.Fsinger_mid,\n\t\t\t\t\t\t\tname: item.Fsinger_name\n\t\t\t\t\t\t}))\n\t\t\t\t\t}\n\n\t\t\t\t\tconst key = item.Findex\n\t\t\t\t\tif (!map[key]) {\n\t\t\t\t\t\tmap[key] = {\n\t\t\t\t\t\t\ttitle: key,\n\t\t\t\t\t\t\titems: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tmap[key].items.push(new Singer({\n\t\t\t\t\t\tid: item.Fsinger_mid,\n\t\t\t\t\t\tname: item.Fsinger_name\n\t\t\t\t\t}))\n\t\t\t\t})\n\t\t\t\t// console.log(map)\n\t\t\t\t// 为了得到有序列表需要处理map\n\t\t\t\tlet hot = []\n\t\t\t\tlet ret = []\n\t\t\t\tfor (let key in map) {\n\t\t\t\t\tlet val = map[key]\n\t\t\t\t\tif (val.title.match(/[a-zA-Z]/)) {\n\t\t\t\t\t\tret.push(val)\n\t\t\t\t\t} else if (val.title === HOT_NAME) {\n\t\t\t\t\t\thot.push(val)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tret.sort((a, b) => {\n\t\t\t\t\treturn a.title.charCodeAt(0) - b.title.charCodeAt(0)\n\t\t\t\t})\n\t\t\t\treturn hot.concat(ret)\n\t\t\t},\n\t\t\t...mapMutations({\n\t\t\t\tsetSinger: 'SET_SINGER'\n\t\t\t})\n\t\t},\n\t\tcomponents: {\n\t\t\tListview\n\t\t}\n\t}\n</script>\n\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\n\t.singer\n\t    position: fixed\n\t    top: 88px\n\t    bottom: 0\n\t    width: 100%\n</style>\n\n\n// WEBPACK FOOTER //\n// singer.vue?58d0fc3a","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    ref: \"singer\",\n    staticClass: \"singer\"\n  }, [_c('listview', {\n    ref: \"list\",\n    attrs: {\n      \"data\": _vm.singers\n    },\n    on: {\n      \"select\": _vm.selectSinger\n    }\n  }), _vm._v(\" \"), _c('router-view')], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-4b8ff140\",\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/singer/singer.vue\n// module id = ld3P\n// module chunks = 1","<template>\n\t<scroll class=\"listview\" :data=\"data\" ref=\"listview\" :listenScroll=\"listenScroll\" :probeType=\"probeType\" @scroll=\"scroll\">\n\t\t<ul>\n\t\t\t<li v-for=\"group in data\" class=\"list-group\" :key=\"group.title\" ref=\"listGroup\">\n\t\t\t\t<h2 class=\"list-group-title\">{{group.title}}</h2>\n\t\t\t\t<ul>\n\t\t\t\t\t<li @click=\"selectItem(item)\" v-for=\"item in group.items\" class=\"list-group-item\" :key=\"item.id\">\n\t\t\t\t\t\t<img class=\"avatar\" v-lazy=\"item.avatar\">\n\t\t\t\t\t\t<span class=\"name\">{{item.name}}</span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t</ul>\n\t\t<div class=\"list-shortcut\" @touchstart=\"onShortcutTouchStart\" @touchmove.stop.prevent=\"onShortcutTouchMove\">\n\t\t\t<ul>\n\t\t\t\t<li v-for=\"(item, index) in shortcutList\" class=\"item\" :data-index=\"index\" :key=\"index\" :class=\"{'current': currentIndex === index}\">{{item}}</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div class=\"list-fixed\" v-show=\"fixedTitle\" ref=\"fixed\">\n\t\t\t<h1 class=\"fixed-title\">{{fixedTitle}}</h1>\n\t\t</div>\n\t\t<div v-show=\"!data.length\" class=\"loading-container\">\n\t\t\t<loading></loading>\n\t\t</div>\n\t</scroll>\n</template>\n\n<script type=\"text/ecmascript-6\">\n\timport Scroll from 'base/scroll/scroll'\n\timport {getData} from 'common/js/dom'\n\timport Loading from 'base/loading/loading'\n\n\tconst ANCHOR_HEIGHT = 18\n\tconst TITLE_HEIGHT = 30\n\n\texport default {\n\t\tcreated() {\n\t\t\tthis.touch = {}\n\t\t\tthis.listenScroll = true\n\t\t\tthis.listHeight = []\n\t\t\tthis.probeType = 3\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tscrollY: -1,\n\t\t\t\tcurrentIndex: 0,\n\t\t\t\tdiff: -1\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\tdata: {\n\t\t\t\ttype: Array,\n\t\t\t\tdefault: null\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tshortcutList() {\n\t\t\t\treturn this.data.map((group) => {\n\t\t\t\t\treturn group.title.substr(0, 1)\n\t\t\t\t})\n\t\t\t},\n\t\t\tfixedTitle() {\n\t\t\t\tif (this.scrollY > 0) {\n\t\t\t\t\treturn ''\n\t\t\t\t}\n\t\t\t\treturn this.data[this.currentIndex] ? this.data[this.currentIndex].title : ''\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tselectItem(item) {\n\t\t\t\tthis.$emit('select', item)\n\t\t\t},\n\t\t\tonShortcutTouchStart(e) {\n\t\t\t\tlet anchorIndex = getData(e.target, 'index')\n\t\t\t\tlet firstTouch = e.touches[0]\n\t\t\t\tthis.touch.y1 = firstTouch.pageY\n\t\t\t\tthis.touch.anchorIndex = anchorIndex\n\t\t\t\tthis._scrollTo(anchorIndex)\n\t\t\t},\n\t\t\tonShortcutTouchMove(e) {\n\t\t\t\tlet firstTouch = e.touches[0]\n\t\t\t\tthis.touch.y2 = firstTouch.pageY\n\t\t\t\tlet delta = (this.touch.y2 - this.touch.y1) / ANCHOR_HEIGHT | 0\n\t\t\t\tlet anchorIndex = parseInt(this.touch.anchorIndex) + delta\n\t\t\t\t// console.log(anchorIndex)\n\t\t\t\tthis._scrollTo(anchorIndex)\n\t\t\t},\n\t\t\t_scrollTo(index) {\n\t\t\t\tif (!index && index !== 0) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (index < 0) {\n\t\t\t\t\tindex = 0\n\t\t\t\t} else if (index > this.listHeight.length - 2) {\n\t\t\t\t\tindex = this.listHeight.length - 2\n\t\t\t\t}\n\t\t\t\tthis.scrollY = -this.listHeight[index]\n\t\t\t\tthis.$refs.listview.scrollToElement(this.$refs.listGroup[index], 0)\n\t\t\t},\n\t\t\trefresh() {\n\t\t\t\tthis.$refs.listview.refresh()\n\t\t\t},\n\t\t\tscroll(pos) {\n\t\t\t\tthis.scrollY = pos.y\n\t\t\t},\n\t\t\t_calculateHeight() {\n\t\t\t\tthis.listHeight = []\n\t\t\t\tconst list = this.$refs.listGroup\n\t\t\t\tlet height = 0\n\t\t\t\tthis.listHeight.push(height)\n\t\t\t\tfor (let i = 0; i < list.length; i++) {\n\t\t\t\t\tlet item = list[i]\n\t\t\t\t\theight += item.clientHeight\n\t\t\t\t\tthis.listHeight.push(height)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tdata() {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis._calculateHeight()\n\t\t\t\t}, 20)\n\t\t\t},\n\t\t\tscrollY(newY) {\n\t\t\t\tconst listHeight = this.listHeight\n\t\t\t\t// 当滚动到顶部 newY > 0\n\t\t\t\tif (newY > 0) {\n\t\t\t\t\tthis.currentIndex = 0\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t// 中间部分滚到\n\t\t\t\tfor (let i = 0; i < listHeight.length - 1; i++) {\n\t\t\t\t\tlet height1 = listHeight[i]\n\t\t\t\t\tlet height2 = listHeight[i + 1]\n\t\t\t\t\tif (-newY >= height1 && -newY < height2) {\n\t\t\t\t\t\tthis.currentIndex = i\n\t\t\t\t\t\tthis.diff = height2 + newY\n\t\t\t\t\t\t// console.log(this.currentIndex)\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 滚动到底部 -newY > last元素上限\n\n\t\t\t\tthis.currentIndex = listHeight.length - 2\n\t\t\t},\n\t\t\tdiff(newVal) {\n\t\t\t\tlet fixedTop = (newVal > 0 && newVal < TITLE_HEIGHT) ? newVal - TITLE_HEIGHT : 0\n\t\t\t\tif (this.fixedTop === fixedTop) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.fixedTop = fixedTop\n\t\t\t\tthis.$refs.fixed.style.transform = `translate3d(0, ${fixedTop}px, 0)`\n\t\t\t}\n\t\t},\n\t\tcomponents: {\n\t\t\tScroll,\n\t\t\tLoading\n\t\t}\n\t}\n</script>\n\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\n  @import \"~common/stylus/variable\"\n\n  .listview\n    position: relative\n    width: 100%\n    height: 100%\n    overflow: hidden\n    background: $color-background\n    .list-group\n      padding-bottom: 30px\n      .list-group-title\n        height: 30px\n        line-height: 30px\n        padding-left: 20px\n        font-size: $font-size-small\n        color: $color-text-l\n        background: $color-highlight-background\n      .list-group-item\n        display: flex\n        align-items: center\n        padding: 20px 0 0 30px\n        .avatar\n          width: 50px\n          height: 50px\n          border-radius: 50%\n        .name\n          margin-left: 20px\n          color: $color-text-l\n          font-size: $font-size-medium\n    .list-shortcut\n      position: absolute\n      z-index: 30\n      right: 0\n      top: 50%\n      transform: translateY(-50%)\n      width: 20px\n      padding: 20px 0\n      border-radius: 10px\n      text-align: center\n      background: $color-background-d\n      font-family: Helvetica\n      .item\n        padding: 3px\n        line-height: 1\n        color: $color-text-l\n        font-size: $font-size-small\n        &.current\n          color: $color-theme\n    .list-fixed\n      position: absolute\n      top: 0\n      left: 0\n      width: 100%\n      .fixed-title\n        height: 30px\n        line-height: 30px\n        padding-left: 20px\n        font-size: $font-size-small\n        color: $color-text-l\n        background: $color-highlight-background\n    .loading-container\n      position: absolute\n      width: 100%\n      top: 50%\n      transform: translateY(-50%)\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// listview.vue?664561ba","\n/* styles */\nrequire(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-36e82cfb\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./listview.vue\")\n\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./listview.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-36e82cfb\\\",\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./listview.vue\"),\n  /* scopeId */\n  \"data-v-36e82cfb\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/listview/listview.vue\n// module id = sODj\n// module chunks = 1"],"sourceRoot":""}